<head>
    <title>Документация по модулю Srem(Shar regular expression module)</title>
    <meta charset="utf-8">
</head>

<body>
    <h1>Назначение</h1>
    Модуль предназначен для того, чтобы проверить соответствует ли некая строка какому либо паттерну и при необходимости, получить данные из строки.
    <h1>Содержание</h1>
    <ul>
        <li><a href="#работа_с_модулем">Работа с модулем</a></li>
        <li><a href="#проверка_на_соответствие">Проверка на соответствие</a></li>
        <li><a href="#паттерны">Паттерны</a>
            <ul>
                <li><a href="#символ">Символ</a></li>
                <li><a href="#суб_выражение">Суб-выражение</a></li>
                <li><a href="#повторения">Повторения</a></li>
                <li><a href="#негативный_паттерн">Негативный паттерн</a></li>
                <li><a href="#именованный_паттерн">Именованный паттерн</a></li>
                <li><a href="#именованная_строка">Именованная строка</a></li>
                <li><a href="#игнорируемый_паттерн">Игнорируемый паттерн</a></li>
                <li><a href="#паттерн_или">Паттерн "или"</a></li>
                <li><a href="#паттерн_если">Паттерн "если"</a></li>
                <li><a href="#границы_слов">Границы слов</a></li>
                <li><a href="#начало_конец">Начало и конец строки</a></li>
            </ul>
        </li>
    </ul>
    <div id="работа_с_модулем">
        <h1>Работа с модулем</h1>
        Для работы, модуль экспортирует две функции и один тип.<br>
        <b>RegExp</b> - тип в котором храниться регулярное выражение.<br><br>
        Функции:
        <ul>
            <li>
                <b>RegExp</b>(regExp <b>STD::String</b>) <b>Srem::RegExp</b> - конструктор создающий объект типа <b>RegExp</b> из регулярного выражения в строке.
                 Если регулярное выражение некорректно, то функция выкидывает исключение с кодом ошибки "const::Srem::eid_invalidRegExp", в качестве данных передаётся индекс символа с ошибкой.
            </li>
            <li>
                macth?(string <b>STD::String</b>, regExp <b>Srem::RegExp</b>) &lt;&gt;<b>STD::Map</b> - функция проверяет, соответствует ли строка указанному регулярному выражению,
                если соответствует - то возвращается объект типа <b>STD::Map</b> (подробности о том, что в объекте содержится, находятся в разделе <a href="#именованный_паттерн">Именованный паттерн</a>),
                если не соответствует - то возвращается <b>nothing</b>.
            </li>
        </ul>
    </div>
    <div id="проверка_на_соответствие">
        <h1>Проверка на соответствие</h1>
        Регулярное выражение состоит из последовательности паттернов, при проверке соответствия строки регулярному выражению, берётся первый паттерн и
        в начале строки ищется подстрока соответствующая паттерну, если такая подстрока найдена, то берётся следующий паттерн и соответсвующая ему подстрока
        ищется с того символа, который следует за предыдущей подстрокой и т.д.<br>
        Строка соответствует регулярному выражению, если для каждого паттерна есть подстрока.
        Паттерну может соответствовать пустая подстрока.
    </div>
    <div id="паттерны">
        <h1>Паттерны</h1>
        Раздел описывает то, какие паттерны существуют, а так же как паттерны записываются в регулярном выражении.
        <div id="символ">
            <h2>Символ</h2>
            <table border="1" style="font-family: monospace">
                <tr><td><b>Запись в регулярном выражении</b></td><td><b>Значение</b></td></tr>
                <tr><td>.</td><td>любой символ</td></tr>
                <tr><td>`d</td><td>один из символов 0123456789</td></tr>
                <tr><td>`D</td><td>любой символ кроме тех что в `d</td></tr>
                <tr><td>`s</td><td>пробел, или символ табуляции, или символ новой строки</td></tr>
                <tr><td>`S</td><td>любой символ кроме тех что в `s</td></tr>
                <tr><td>`w</td><td>любой символ от 'a' до 'z', или от 'A' до 'Z', или один из`d, или '_'</td></tr>
                <tr><td>`W</td><td>любой символ кроме тех что в `w</td></tr>
                <tr><td>#<i>символ</i></td><td>указанный <i>символ</i></td></tr>
                <tr><td>Иной <i>символ</i> кроме следующих (){}[]`.#^$|?+*</td><td>указанный <i>символ</i></td></tr>
                <tr><td>[<i>символы</i>]</td><td>любой из указанных символов, можно указывать вышеуказанные паттерны символов, кроме `D, `S, `W и .(любой символ).
                    Так же можно писать a-z, что означает от 'a' до 'z', например `w то же что и [a-zA-Z0-9_] или [a-zA-Z`d_].
                </td></tr>
                <tr><td>[^<i>символы</i>]</td><td>любой символ, кроме указанных. Правила такие же как и у [<i>символы</i>].</td></tr>
            </table><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>a</td>
                    <td>a</td>
                    <td>b</td>
                </tr>
                <tr>
                    <td>c</td>
                    <td>c</td>
                    <td>cc</td>
                </tr>
                <tr>
                    <td>abc</td>
                    <td>abc</td>
                    <td>acbabc</td>
                </tr>
                <tr>
                    <td>a.b</td>
                    <td>acb</td>
                    <td>bbb</td>
                </tr>
                <tr>
                    <td>`d</td>
                    <td>0</td>
                    <td>00</td>
                </tr>
                <tr>
                    <td>`D</td>
                    <td>a</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>#(</td>
                    <td>(</td>
                    <td>a</td>
                </tr>
                <tr>
                    <td>[123]</td>
                    <td>1</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>[^123]</td>
                    <td>0</td>
                    <td>1</td>
                </tr>
            </table>
        </div>
        <div id="суб_выражение">
            <h2>Суб-выражение</h2>
            (<i>регулярное выражение</i>)<br><br>
            В качестве паттерна в регулярном выражении, может использоваться другое регулярное выражение.<br>
            Для использования регулярного выражения в качестве паттерна, нужно поместить его внутри скобок ().<br>
        </div>
        <div id="повторения">
            <h2>Повторения</h2>
            В строке можно искать соответствие одному паттерну несколько раз подряд.<br>
            При поиске соответствия строки паттерну, повторения происходят до тех пор, пока количество не достигнет максимума, либо строка перестанет соответствовать паттерну.<br>
            Если повторяющемуся паттерну соответствует пустая подстрока, то функция match? Выкидывает исключение с кодом "const::Srem::eid_pointlessRepetitions".<br><br>
            <table border="1" style="font-family: monospace">
                <tr><td><b>Запись в регулярном выражении</b></td><td><b>Значение</b></td></tr>
                <tr>
                    <td><i>паттерн</i>{<i>a</i>,<i>b</i>}</td>
                    <td><i>a</i> - минимальное количество повторов, <i>b</i> - максимальное количество повторов</td>
                </tr>
                <tr>
                    <td><i>паттерн</i>{<i>a</i>,}</td>
                    <td>то же, что и <i>паттерн</i>{<i>a</i>,9223372036854775807}</td>
                </tr>
                <tr>
                    <td><i>паттерн</i>{,<i>a</i>}</td>
                    <td>то же, что и <i>паттерн</i>{0,<i>a</i>}</td>
                </tr>
                <tr>
                    <td><i>паттерн</i>{<i>a</i>}</td>
                    <td>то же, что и <i>паттерн</i>{<i>a</i>,<i>a</i>}</td>
                </tr>
                <tr>
                    <td><i>паттерн</i>?</td>
                    <td>то же, что и <i>паттерн</i>{0,1}</td>
                </tr>
                <tr>
                    <td><i>паттерн</i>+</td>
                    <td>то же, что и <i>паттерн</i>{1,9223372036854775807}</td>
                </tr>
                <tr>
                    <td><i>паттерн</i>*</td>
                    <td>то же, что и <i>паттерн</i>{0,9223372036854775807}</td>
                </tr>
            </table><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>a{2,3}</td>
                    <td>aa</td>
                    <td>a</td>
                </tr>
                <tr>
                    <td>c{0,3}</td>
                    <td>ccc</td>
                    <td>cccc</td>
                </tr>
                <tr>
                    <td>.{3}</td>
                    <td>abc</td>
                    <td>ac</td>
                </tr>
                <tr>
                    <td>(mama)+</td>
                    <td>mamamama</td>
                    <td>mamama</td>
                </tr>
                <tr>
                    <td>[#+#-]?`d+</td>
                    <td>123</td>
                    <td>12 3</td>
                </tr>
                <tr>
                    <td>[#+#-]?`d+</td>
                    <td>-144</td>
                    <td>++123</td>
                </tr>
                <tr>
                    <td>a {,2}b</td>
                    <td>ab</td>
                    <td>aab</td>
                </tr>
            </table>
        </div>
        <div id="негативный_паттерн">
            <h2>Негативный паттерн</h2>
            (?:<i>регулярное_выражение</i>)<br><br>
            Паттерн удостоверяется, что строка с текущей позиции не соответствует указанному регулярному выражению.<br>
            Паттерн не изменяет текущую позицию в строке.<br>
            Паттерну может соответствовать только пуста подстрока.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>(?:some)((?:thing)`w)*thing</td>
                    <td>anything</td>
                    <td>something</td>
                </tr>
                <tr>
                    <td>(?:some)(?:any)((?:body)`w)*body</td>
                    <td>body</td>
                    <td>anybody</td>
                </tr>
            </table>
        </div>
        <div id="именованный_паттерн">
            <h2>Именованный паттерн</h2>
            (?(<i>имя</i>)<i>регулярное_выражение</i>)<br><br>
            Именованный паттерн - паттерн у которого есть имя.<br>
            Функция match? возвращает ассоциативный массив, ключами являются имена паттернов,
            а в качестве значений используются подстроки соответствующие именованным паттернам.<br>
            Если есть два паттерна с одинаковым именем, или один именованный паттерн повторяется,
            то в результате функция match? будет использоваться подстрока которая ближе к концу строки.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Ключи и значения в результате функции match?</b></td>
                </tr>
                <tr>
                    <td>(?(someName).{3})</td>
                    <td>123</td>
                    <td>someName = 123</td>
                </tr>
                <tr>
                    <td>(?(someName).{3})(?(someName).{3})</td>
                    <td>123456</td>
                    <td>someName = 456</td>
                </tr>
            </table>
        </div>
        <div id="именованная_строка">
            <h2>Именованная строка</h2>
            `(<i>имя</i>)<br><br>
            Паттерну соответствует подстрока равная подстроке, которая соответствует именованному паттерну с указанным именем.<br>
            Если подстроки, которая соответствует именованному паттерну с указанным именем, нет, то и паттерну ничего не соответствует.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>(?(a)some) = `(a)</td>
                    <td>some = some</td>
                    <td>some = `(a)</td>
                </tr>
                <tr>
                    <td>(?(a)123)`(a)(?(a)456)`(a)</td>
                    <td>123123456456</td>
                    <td>123123456123</td>
                </tr>
                <tr>
                    <td>((?(a)`w+)[, ])+= `(a)</td>
                    <td>123,456,789 = 789</td>
                    <td>123,456,789 = 123</td>
                </tr>
            </table>
        </div>
        <div id="игнорируемый_паттерн">
            <h2>Игнорируемый паттерн</h2>
            (??<i>регулярное_выражение</i>)<br><br>
            Паттерн удостоверяется, что строка с текущей позиции соответствует указанному регулярному выражению.<br>
            Паттерн не изменяет текущую позицию в строке.<br>
            Паттерну может соответствовать только пуста подстрока.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>(??some)((?:thing)`w)*thing</td>
                    <td>something</td>
                    <td>anything</td>
                </tr>
                <tr>
                    <td>(??some)(??thing)something</td>
                    <td>something</td>
                    <td>anything</td>
                </tr>
            </table>
        </div>
        <div id="паттерн_или">
            <h2>Паттерн "или"</h2>
            (<i>регулярное_выражение</i>)|(<i>регулярное_выражение</i>)<br>
            <i>паттерн_или</i>|(<i>регулярное_выражение</i>)<br><br>
            Проверяет, соответствует ли подстрока левому регулярному выражению и если нет, то используется второе выражение.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>(some)|(any)thing</td>
                    <td>something</td>
                    <td>thing</td>
                </tr>
                <tr>
                    <td>(`w+)|(@)=`d+</td>
                    <td>@=123</td>
                    <td>1.2.3=123</td>
                </tr>
                <tr>
                    <td>(1)|(01)|(23)</td>
                    <td>23</td>
                    <td>123</td>
                </tr>
            </table>
        </div>
        <div id="паттерн_если">
            <h2>Паттерн "если"</h2>
            (?`(<i>имя</i>=(<i>регулярное_выражение</i>))(<i>регулярное_выражение</i>)(<i>регулярное_выражение</i>))<br><br>
            Паттерн заменяет себя на одно из регулярных выражений, в зависимости от того, соответствует ли указанная именованная строка указанному регулярном выражению.<br>
            Если в регулярном выражении которое применяется к именованной строке есть именованные паттерны, то они не влияют на результат функции match?.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>(?(name)`w+) = (?`(name=(Some))(`d+)(`w+))</td>
                    <td>Some = 123</td>
                    <td>Some = abc</td>
                </tr>
                <tr>
                    <td>(?(name)`w+) = (?`(name=(Some))(`d+)(`w+))</td>
                    <td>some = abc</td>
                    <td>some = 1.2.3</td>
                </tr>
            </table>
        </div>
        <div id="границы_слов">
            <h2>Границы слов</h2>
            `b - если в текущей позиции, с одной стороны `w, а с другой стороны не `w<br>
            `B - не `b<br><br>
            Паттерны не изменяют текущую позицию в строке.<br>
            Паттернам может соответствовать только пуста подстрока.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>[#.`w]+`b</td>
                    <td>a.b.c</td>
                    <td>a.b.c.</td>
                </tr>
                <tr>
                    <td>`b[#.`w]+</td>
                    <td>a.b.c</td>
                    <td>.a.b.c</td>
                </tr>
                <tr>
                    <td>`B[#.`w]+</td>
                    <td>.a.b.c</td>
                    <td>a.b.c</td>
                </tr>
            </table>
        </div>
        <div id="начало_конец">
            <h2>Начало и конец строки</h2>
            ^ - если в текущей позиции началом строки<br>
            $ - если в текущей позиции конец строки<br><br>
            Паттерны не изменяют текущую позицию в строке.<br>
            Паттернам может соответствовать только пуста подстрока.<br><br>
            Примеры:
            <table border="1" style="font-family: monospace">
                <tr>
                    <td><b>Регулярное выражение</b></td>
                    <td><b>Соответствующая строка</b></td>
                    <td><b>Несоответствующая строка</b></td>
                </tr>
                <tr>
                    <td>[#.`w]*(`b )|(^)= 12</td>
                    <td>= 12</td>
                    <td>a.b.c. = 12</td>
                </tr>
                <tr>
                    <td>[#.`w]*(`b )|(^)= 12</td>
                    <td>a.b.c = 12</td>
                    <td>. = 12</td>
                </tr>
                <tr>
                    <td>((?:#.end$)[#.`w])+#.end</td>
                    <td>a.end.b.end.c.end</td>
                    <td>a.end.b.end.c</td>
                </tr>
            </table>
        </div>
    </div>
</body>
